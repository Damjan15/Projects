import { useHistory } from "react-router-dom";
import { useState } from "react";
import axios from "axios";
import {
  NavbarCenter,
  NavbarForm,
  NavbarInput,
  NavbarItem,
  NavbarLink,
  NavbarLogo,
  NavbarRight,
  NavbarWrapper,
} from "./navbar.styles.js";


const Navbar = ({ data, setData }) => {
  const [ input, setInput ] = useState("");
  const history = useHistory();

  const search = (e) => {
    e.preventDefault();

    axios.request(`https://api.themoviedb.org/3/search/multi?api_key=${process.env.REACT_APP_API_KEY}&language=en-US&query=${input}`).then(res => setData(res.data));
    
    history.push("/search");
    setInput("");
  }


  return (
    <NavbarWrapper>
      <NavbarLogo>
        <NavbarLink to="/">
        <svg
          width="432"
          height="64"
          viewBox="0 0 432 64"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M68.4 0H7.6C3.4086 0 0 3.18933 0 7.11111V28.4444V56.8889C0 60.8107 3.4086 64 7.6 64H68.4C72.5914 64 76 60.8107 76 56.8889V28.4444V7.11111C76 3.18933 72.5914 0 68.4 0ZM68.4038 21.3333C68.4 21.3333 68.4 21.3333 68.4038 21.3333H66.6368L56.5022 7.11111H68.4L68.4038 21.3333ZM51.3 42.6667L30.4 53.3333V32L51.3 42.6667ZM47.6368 21.3333L37.5022 7.11111H47.367L57.5016 21.3333H47.6368ZM38.5016 21.3333H28.6368L18.5022 7.11111H28.367L38.5016 21.3333ZM7.6 7.11111H9.367L19.5016 21.3333H7.6V7.11111Z"
            fill="#009BDD"
          />
          <path
            d="M117.028 57.49C113.761 57.49 110.821 56.93 108.208 55.81C105.595 54.6433 103.541 53.01 102.048 50.91C100.555 48.81 99.808 46.36 99.808 43.56H108.348C108.535 45.66 109.351 47.3867 110.798 48.74C112.291 50.0933 114.368 50.77 117.028 50.77C119.781 50.77 121.928 50.1167 123.468 48.81C125.008 47.4567 125.778 45.73 125.778 43.63C125.778 41.9967 125.288 40.6667 124.308 39.64C123.375 38.6133 122.185 37.82 120.738 37.26C119.338 36.7 117.378 36.0933 114.858 35.44C111.685 34.6 109.095 33.76 107.088 32.92C105.128 32.0333 103.448 30.68 102.048 28.86C100.648 27.04 99.948 24.6133 99.948 21.58C99.948 18.78 100.648 16.33 102.048 14.23C103.448 12.13 105.408 10.52 107.928 9.4C110.448 8.28 113.365 7.72 116.678 7.72C121.391 7.72 125.241 8.91 128.228 11.29C131.261 13.6233 132.941 16.8433 133.268 20.95H124.448C124.308 19.1767 123.468 17.66 121.928 16.4C120.388 15.14 118.358 14.51 115.838 14.51C113.551 14.51 111.685 15.0933 110.238 16.26C108.791 17.4267 108.068 19.1067 108.068 21.3C108.068 22.7933 108.511 24.03 109.398 25.01C110.331 25.9433 111.498 26.69 112.898 27.25C114.298 27.81 116.211 28.4167 118.638 29.07C121.858 29.9567 124.471 30.8433 126.478 31.73C128.531 32.6167 130.258 33.9933 131.658 35.86C133.105 37.68 133.828 40.13 133.828 43.21C133.828 45.6833 133.151 48.0167 131.798 50.21C130.491 52.4033 128.555 54.1767 125.988 55.53C123.468 56.8367 120.481 57.49 117.028 57.49ZM152.554 24.94V46.29C152.554 47.7367 152.881 48.7867 153.534 49.44C154.234 50.0467 155.401 50.35 157.034 50.35H161.934V57H155.634C152.041 57 149.287 56.16 147.374 54.48C145.461 52.8 144.504 50.07 144.504 46.29V24.94H139.954V18.43H144.504V8.84H152.554V18.43H161.934V24.94H152.554ZM177.269 24.03C178.436 22.07 179.976 20.5533 181.889 19.48C183.849 18.36 186.159 17.8 188.819 17.8V26.06H186.789C183.662 26.06 181.282 26.8533 179.649 28.44C178.062 30.0267 177.269 32.78 177.269 36.7V57H169.289V18.43H177.269V24.03ZM231.504 36.77C231.504 38.2167 231.411 39.5233 231.224 40.69H201.754C201.988 43.77 203.131 46.2433 205.184 48.11C207.238 49.9767 209.758 50.91 212.744 50.91C217.038 50.91 220.071 49.1133 221.844 45.52H230.454C229.288 49.0667 227.164 51.9833 224.084 54.27C221.051 56.51 217.271 57.63 212.744 57.63C209.058 57.63 205.744 56.8133 202.804 55.18C199.911 53.5 197.624 51.1667 195.944 48.18C194.311 45.1467 193.494 41.6467 193.494 37.68C193.494 33.7133 194.288 30.2367 195.874 27.25C197.508 24.2167 199.771 21.8833 202.664 20.25C205.604 18.6167 208.964 17.8 212.744 17.8C216.384 17.8 219.628 18.5933 222.474 20.18C225.321 21.7667 227.538 24.0067 229.124 26.9C230.711 29.7467 231.504 33.0367 231.504 36.77ZM223.174 34.25C223.128 31.31 222.078 28.9533 220.024 27.18C217.971 25.4067 215.428 24.52 212.394 24.52C209.641 24.52 207.284 25.4067 205.324 27.18C203.364 28.9067 202.198 31.2633 201.824 34.25H223.174ZM236.697 37.54C236.697 33.6667 237.491 30.2367 239.077 27.25C240.711 24.2633 242.904 21.9533 245.657 20.32C248.457 18.64 251.537 17.8 254.897 17.8C257.931 17.8 260.567 18.4067 262.807 19.62C265.094 20.7867 266.914 22.2567 268.267 24.03V18.43H276.317V57H268.267V51.26C266.914 53.08 265.071 54.5967 262.737 55.81C260.404 57.0233 257.744 57.63 254.757 57.63C251.444 57.63 248.411 56.79 245.657 55.11C242.904 53.3833 240.711 51.0033 239.077 47.97C237.491 44.89 236.697 41.4133 236.697 37.54ZM268.267 37.68C268.267 35.02 267.707 32.71 266.587 30.75C265.514 28.79 264.091 27.2967 262.317 26.27C260.544 25.2433 258.631 24.73 256.577 24.73C254.524 24.73 252.611 25.2433 250.837 26.27C249.064 27.25 247.617 28.72 246.497 30.68C245.424 32.5933 244.887 34.88 244.887 37.54C244.887 40.2 245.424 42.5333 246.497 44.54C247.617 46.5467 249.064 48.0867 250.837 49.16C252.657 50.1867 254.571 50.7 256.577 50.7C258.631 50.7 260.544 50.1867 262.317 49.16C264.091 48.1333 265.514 46.64 266.587 44.68C267.707 42.6733 268.267 40.34 268.267 37.68ZM333.489 17.8C336.522 17.8 339.229 18.43 341.609 19.69C344.035 20.95 345.925 22.8167 347.279 25.29C348.679 27.7633 349.379 30.75 349.379 34.25V57H341.469V35.44C341.469 31.9867 340.605 29.35 338.879 27.53C337.152 25.6633 334.795 24.73 331.809 24.73C328.822 24.73 326.442 25.6633 324.669 27.53C322.942 29.35 322.079 31.9867 322.079 35.44V57H314.169V35.44C314.169 31.9867 313.305 29.35 311.579 27.53C309.852 25.6633 307.495 24.73 304.509 24.73C301.522 24.73 299.142 25.6633 297.369 27.53C295.642 29.35 294.779 31.9867 294.779 35.44V57H286.799V18.43H294.779V22.84C296.085 21.2533 297.742 20.0167 299.749 19.13C301.755 18.2433 303.902 17.8 306.189 17.8C309.269 17.8 312.022 18.4533 314.449 19.76C316.875 21.0667 318.742 22.9567 320.049 25.43C321.215 23.0967 323.035 21.2533 325.509 19.9C327.982 18.5 330.642 17.8 333.489 17.8Z"
            fill="black"
          />
          <path
            d="M367.513 8.35V57H359.533V8.35H367.513ZM409.42 8.35V14.86H396.47V57H388.49V14.86H375.47V8.35H409.42Z"
            fill="#009BDD"
          />
        </svg>
        </NavbarLink>
      </NavbarLogo>

      <NavbarCenter>
        <NavbarItem>
          <NavbarLink to="/">Home</NavbarLink>
        </NavbarItem>

        <NavbarItem>
          <NavbarLink to="/movies">Movies</NavbarLink>
        </NavbarItem>

        <NavbarItem>
          <NavbarLink to="/shows">Shows</NavbarLink>
        </NavbarItem>

        <NavbarItem>
          <NavbarLink to="/popular">Most Popular</NavbarLink>
        </NavbarItem>
      </NavbarCenter>

      <NavbarRight>
        <NavbarForm>
          <NavbarInput placeholder="Search" value={input} onChange={(e) => setInput(e.target.value)} />
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <path d="M10,18c1.846,0,3.543-0.635,4.897-1.688l4.396,4.396l1.414-1.414l-4.396-4.396C17.365,13.543,18,11.846,18,10 c0-4.411-3.589-8-8-8s-8,3.589-8,8S5.589,18,10,18z M10,4c3.309,0,6,2.691,6,6s-2.691,6-6,6s-6-2.691-6-6S6.691,4,10,4z" />
          </svg>
          <button onClick={search}></button>
        </NavbarForm>
      </NavbarRight>
    </NavbarWrapper>
  );
};
export default Navbar;
